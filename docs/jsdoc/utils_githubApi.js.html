<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/githubApi.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/githubApi.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// axios publishes both ESM and CJS. For Jest (and some test runners) require() resolves
// to the CJS build which avoids `import` parsing errors. Use a safe resolution here.
let axios;

// GitHub GraphQL API endpoint
const GITHUB_API_URL = 'https://api.github.com/graphql';

// Access your GitHub token securely via environment variables
const GITHUB_TOKEN = process.env.REACT_APP_GITHUB_TOKEN;

/**
 * Fetch pinned repositories from GitHub using GraphQL.
 * This function sends a POST request to the GitHub API using a GraphQL query
 * to retrieve the user's pinned repositories, their descriptions, and their README content.
 *
 * @returns {Promise&lt;Array>} Array of pinned repositories with their name, description, URL, and README content.
 */
export const fetchPinnedRepositories = async () => {
  // GraphQL query to get the first 6 pinned repositories for the user 'keglev'
  // NOTE: We purposely do NOT request the README blob via GraphQL here. The client will
  // fetch README content from raw.githubusercontent.com per-repo when needed to avoid
  // exposing tokens or triggering GraphQL blob parsing edge-cases.
  const query = `
    query getPinned { user(login: "keglev") { pinnedItems(first: 6, types: [REPOSITORY]) { nodes { __typename ... on Repository { name description url } } } } }
  `;

  try {
    // Send a POST request to the GitHub API with the GraphQL query
    if (!axios) {
      try {
        // eslint-disable-next-line global-require
        const _axios = require('axios');
        axios = _axios &amp;&amp; _axios.default ? _axios.default : _axios;
      } catch (e) {
        // fallback to dynamic import where available
        try { const imported = await import('axios'); axios = imported &amp;&amp; imported.default ? imported.default : imported; } catch (ee) { axios = undefined; }
      }
    }

    const response = await axios.post(
      GITHUB_API_URL,
      { query },
      {
        headers: {
          Authorization: `Bearer ${GITHUB_TOKEN}`, // Use the GitHub token for authentication
          "X-GitHub-Api-Version": "2022-11-28", // Specify the API version
        },
      }
    );
    // Return the array of pinned repositories data from the API response
    return response.data.data.user.pinnedItems.nodes;
  } catch (error) {
    if (error.response &amp;&amp; error.response.status === 401) {
      console.error("GitHub token is expired or invalid.");
    } else {
      console.error('Error fetching pinned repositories:', error);
    }
    return []; // Return an empty array so Projects.js can show an error message
  }
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#About">About</a></li><li><a href="global.html#Experience">Experience</a></li><li><a href="global.html#FooterMessage">FooterMessage</a></li><li><a href="global.html#LanguageWrapper">LanguageWrapper</a></li><li><a href="global.html#Menu">Menu</a></li><li><a href="global.html#NameTitle">NameTitle</a></li><li><a href="global.html#Projects">Projects</a></li><li><a href="global.html#Sidebar">Sidebar</a></li><li><a href="global.html#SidebarContainer">SidebarContainer</a></li><li><a href="global.html#SocialLinks">SocialLinks</a></li><li><a href="global.html#SocialLinksWrapper">SocialLinksWrapper</a></li><li><a href="global.html#StyledLink">StyledLink</a></li><li><a href="global.html#fetchPinnedRepositories">fetchPinnedRepositories</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Mon Oct 20 2025 19:07:06 GMT+0200 (Mitteleurop√§ische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
